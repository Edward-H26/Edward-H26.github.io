---
name: Illinois State Buildings Analysis
tools: [Python, Altair, vega-lite, Pandas]
image: assets/pngs/building.png
description: Interactive analysis of Illinois state building inventory with temporal-size patterns and usage distribution across counties
custom_js:
  - vega.min
  - vega-lite.min
  - vega-embed.min
  - justcharts
---

# Illinois State Buildings Interactive Analysis

## The Comprehensive Analysis of Illinois State Buildings Based on the Year Constructed and Square Footage by Category Distribution

<vegachart schema-url="{{ site.baseurl }}/assets/json/buildingAgeAndSizeAnalysis.json" style="width:20%"></vegachart>

### Summary

#### Description
This visualization presents a comprehensive analysis of Illinois state buildings through `buildingAgeAndSizeAnalysis` that consists of`buildingYearAndAreaScatterPlot` and `agencyCategoryHistogramPlot`.  By plotting `Year Constructed` against `Square Footage` on a `log` scale, the scatter plot highlights patterns over time in terms of differences in building size. Each point represents an individual building from the `buildingDatasetCleaned` dataframe, which contains filtered records without any missing data in `Year Constructed`, `Year Acquired`, and `Square Footage` by applying `Year Constructed > 0`, `Year Acquired > 0`, and `Square Footage > 0` to the preprocessed dataframe. 

The visualization incorporates the customized `Agency Category` field that is created from the `agencyCategories` through unique mapping strategy, which combines 38 distinct agency names from `buildingDatasetRaw["Agency Name"].unique()` into 10 general categories. The histogram displays the count distribution across these agency categories, which dynamically updates based on the brush selection from the scatter plot. The visualization concatenates the two plots in order to create a side by side layout with widths of 300 pixels each in order to create a holistic view of the dataset. 

This visualization delineates the historical development of state buildings over more than two centuries. By connecting the `Year Constructed`, `Square Footage`, and `Agency Category`, users can uncover how the infrastructure of these state buildings have evolved from 18th century to 21st century. By examining small rural houses and massive urban buildings, users can explore the resource allocations through different time periods such as whether the state invest more in higher education or healthcare facilities during specific decades or when was the shift from industrial to service based buildings. The interactive brush selection transforms these abstract questions into visualizations where users can identify construction patterns during different economic periods, trace the expansion of specific state services building, and recognize how different administrative priorities have shaped the physical footprint of state government. The histogram further helps the user to visualize which agency categories dominated at the selected time period, which reveals whether the government was focusing on a specific sector of agency categories or various agency categories. As one can see, this design helps policymakers, researchers, and citizens to understand how past infrastructure decisions created the current the public facilities in Illinois and plan for future developments.

#### Encodings
By carefully choosing appropriate encodings for each category, the scatter plot `buildingYearAndAreaScatterPlot` utilizes these encodings to effectively represent the multidimensional building data. The x-axis utilizes `alt.X("Year Constructed:Q")` with the descriptive title "The Year of the Building Being Constructed" and a scale of `[1700, 2025]` to better display buildings at the early stage as well as most recent buildings. The y-axis utilizes `alt.Y("Square Footage:Q")` with the title "The Area of the Building in Square Footage" and a logarithmic scale through `scale = alt.Scale(type = "log")` in order to help users to better visualize different building sizes from small utility structures to massive institutional facilities. 

The `mark_circle()` function generates circular marks with `size = 40` to ensure visibility across the plot; it also has `opacity = 0.6` to indicate overlapping points. The tooltips include `Location Name:N`, `Agency Name:N`, `Agency Category:N`, `City:N`, `Year Constructed:Q`, `Square Footage:Q` formatted with comma separators, `Total Floors:Q`, `Usage Description:N`, and `Bldg Status:N` provide users with detailed contextual information during exploration.

The histogram `agencyCategoryHistogramPlot` employs `mark_bar()` with `alt.X("Agency Category:N")` on the x-axis with `axis = alt.Axis(labelAngle = -45)` to ensure category names remain readable despite of the differences in their lengths. The y-axis uses `alt.Y("count():Q")` with the title "The Number of Buildings" to display the frequency distribution across categories through the count aggregation. Both visualizations are 400 pixels each with `anchor = "middle"` for title alignment.

#### Colormaps
The colormaps are based on `alt.Color("Agency Category:N")` with `scale = alt.Scale(scheme = "category10")` for both visualizations to establish visual coherence throughout the interactive experience. The `category10` palette was deliberately selected because it provides exactly 10 distinct colors that align perfectly with the 10 agency categories defined in the `agencyCategories` dictionary, including `Higher Education Institutions`, `Education Administration`, `Corrections & Justice`, `Public Safety & Emergency`, `Health & Human Services`, `Natural Resources & Environment`, `Infrastructure & Operations`, `Legal & Judicial`, and `Executive & Administrative`. This categorical scheme makes sure that each agency type receives equal visual prominence without implying any hierarchical relationships, which is crucial for analyzing of the how resources are being allocated to different agencies. The `0.6` opacity setting in the scatter plot allows these colors to blend naturally where overlapping points reveal specific patterns and maintain the ability to identify individual buildings. In the histogram, the legend is intentionally suppressed through `legend = None` to eliminate redundancy as the x-axis labels already provide category identification. With `legend = None`, it maintains visual coherence with the scatter plot selections rather than adding additional unnecessary information.

#### Transformations
Through systematic transformation of the `agencyCategories`, this mapping transforms 38 unique values from `buildingDatasetRaw["Agency Name"]` into 10 general categories that reflect the major organizations in state government, such as combining all state universities under "Higher Education" and grouping related law enforcement agencies under "Public Safety & Emergency". The transformation is applied through `buildingDatasetRaw["Agency Category"] = buildingDatasetRaw["Agency Name"].map(agencyCategories)` to construct a new category for pattern recognition across related agencies. 

The data was cleaned through `buildingDatasetCleaned = buildingDatasetRaw[(buildingDatasetRaw["Year Constructed"] > 0) & (buildingDatasetRaw["Year Acquired"] > 0) & (buildingDatasetRaw["Square Footage"] > 0)]` to remove invalid records with zero or negative values that represent data entry errors or missing data. The logarithmic transformation is applied to the `Square Footage` axis through `scale = alt.Scale(type = "log")` in order to reveal hidden patterns across multiple dimensions of the data of magnitude, which makes it easier for the user to visualize small administrative offices and massive institutional buildings on the same plot. The brush selection mechanism creates a dynamic transformation through `transform_filter(brushSelection)` that filters the histogram data in real time based on the user's selection area and the count aggregation will be recalculated to reflect the selected subset of buildings.

#### Interactivity
The interval brush selection through `brushSelection = alt.selection_interval(encodings = ["x", "y"])` transforms the visualization from a static display into a powerful analytical tool that responds to the user's selection in real time. By enabling click and drag selection across both x-axis and y-axis, the user can investigate about state buildings in a specific time period, such as examining what types of agencies constructed large facilities during particular historical periods. The selection is integrated into the scatter plot via `.add_params(brushSelection)` and connected to the histogram through `.transform_filter(brushSelection)` so that the user's selection can be updated in real time to reflect the selected subset of buildings.

The comprehensive tooltip also provides detailed information to demonstrate the exact locations, managing agencies, construction dates, and current status whenever the user hovers over individual points. The formatted Square Footage values utilizes `format = ","` to ensure that large numbers remain readable and enhance the user experience during their exploration. The `0.6` opacity setting ensures that brush selections remain visible even in densely populated regions of the plot and the logarithmic scale maintains consistent  across the entire range of building sizes from the smallest to the largest facilities in the state inventory.

## The Comprehensive Analysis of Illinois State Buildings Based on the Building Usage Types and Location by County Distribution

<vegachart schema-url="{{ site.baseurl }}/assets/json/buildingUsageTypeAndLocationAnalysis.json" style="width:70%"></vegachart>

### Summary

#### Description
This visualization combines `usageTypeBarChart` and `countyDistributionBarChart` into `buildingUsageTypeAndLocationAnalysis` to analyze the usage patterns and geographic distribution of Illinois state buildings. The `usageTypeBarChart` displays all unique values from `buildingDatasetCleaned["Usage Description"]` as x-axis is sorted by frequency to reveal the variety of purposes of these state facilities. The `countyDistributionBarChart` presents the geographic distribution across the state's most significant counties through `buildingDatasetCleaned["County"].value_counts().head(20).index.tolist()` which identifies the top 20 counties by building count and stores them in the `topCounties` list. This subset creates `topCountyBuildings = buildingDatasetCleaned[buildingDatasetCleaned["County"].isin(topCounties)]` to maintain interpretability and capture the majority state building infrastructures. The visualization utilizes `clickSelection = alt.selection_point(fields = ["Usage Description"])` to establish an interactive connection between `usageTypeBarChart` and `countyDistributionBarChart` so that users can explore whether certain facility types cluster in specific regions or distribute evenly across the state. Hence, the visualization combines the two plots provides complementary perspectives on the building infrastructure of Illinois.

This visualization delineates how Illinois construct different types of building across its diverse geography from the densely populated metropolitan area to rural regions. By connecting usage types with geographic locations, the user can uncover patterns that reveal state policy decisions and historical developments in buildings across all the counties in Illinois. The interactive design enables users to explore critical questions like whether government services are accessible across the state or in certain urban areas and whether research facilities cluster around university towns and major counties or not. The visualization reveals the design behind state infrastructure placement and how geography, population density, institutional presence, and historical circumstances shape the buildings in Illinois. For policymakers and researchers, this visualization reveals potential service gaps where certain building types are only located at specific counties and residents of other regions face various challenges. For urban planners and economic development professionals, the geographic clustering patterns indicate how state facilities influence local economies. Citizens can discover if their county receives proportionate state infrastructure investment compared to similarly sized region or not. As the frequency chart highlights dominant usage types and buildings in specific counties, the interactive filtering enables the user to examine into specific facilities and transforms administrative data into insights about how state government shape the buildings in Illinois.

#### Encodings
By carefully choosing appropriate encodings for each category, the `usageTypeBarChart` utilizes `alt.X("count():Q", title = "Number of Buildings")` to represent the quantitative frequency of each usage type and `alt.Y("Usage Description:N", title = "Usage Type", sort = "-x")` to represent  usage descriptions in descending order so that the most common building types appear at the top. The conditional color encoding `alt.condition(clickSelection, alt.Color("Usage Description:N", scale = alt.Scale(scheme = "category20"), legend = None), alt.value("lightgray"))` creates a dynamic visual effect where selected usage types display in distinctive colors from the `category20` palette and the unselected types display in `light gray` color. Additionally, the opacity encoding `alt.condition(clickSelection, alt.value(1.0), alt.value(0.3))` applies full opacity to selected items and reduces unselected items to `30%` opacity to help user better understand the focus of the visualization.

The `countyDistributionBarChart` employs `alt.X("count():Q", title = "Number of Buildings")` to display the building count and utilizes `alt.Y("County:N", title = "County (Top 20)", sort = "-x")` to display county names in descending order. The static color `alt.value("steelblue")` provides visual effects and avoid overwhelming color with the usage type selections. Both charts incorporate formatted tooltips through `alt.Tooltip("count():Q", title = "Number of Buildings", format = ",")` to ensure precise counts are properly shown with thousand separators for improved readability.

#### Colormaps
The visualization uses a specific color strategy that separates usage types from geographic patterns and maintains the overall design as clear and readable to the user. For the `usageTypeBarChart`, the `category20` palette provides 20 distinct colors that are mapped to the unique usage types in `buildingDatasetCleaned["Usage Description"].unique()`, such as offices, laboratories, storage facilities, warehouses, classrooms, dormitories, and specialized state facilities. This design ensures that each usage type can receive a visually distinct color when it is being selected, which helps the user to quickly identify and compare categories as the user interacts with the chart. In the default state of unselected categories, all bars are rendered in `lightgray` to ensure that unselected categories remain visible, which maintains a clean visual effect and prevents the chart from having overwhelming colors when the user focuses on one single usage type.

The `countyDistributionBarChart` uses a different design choice to reflect its different role in the analysis. Instead of a categorical palette, it applies a single color of `steelblue` to all bars. This unique approach avoids visual confusion between usage based colors in the first chart and county based colors in the second chart as it reinforces the conceptual distinction between what the building is for and where the building is located. The `steelblue` tone provides a professional look with strong contrast against the background. Hence, the county bars do not change color when a selection is made. Instead, the underlying data is filtered and shown in `steelblue` to help the user to stay focused as the user moves between the different sections.

#### Transformations
The geographic data is being preprocessed to balance visual effects with readability by focusing on a subset of counties based on the building activity. The subset `topCounties` is created by using `buildingDatasetCleaned["County"].value_counts().head(20).index.tolist()`, which first counts how many buildings appear in each county, sorts those counties in descending order, selects the top 20 by building count, and then extracts the county names as a Python list. This list is used to construct `topCountyBuildings` through `buildingDatasetCleaned[buildingDatasetCleaned["County"].isin(topCounties)]` to effectively narrow down to the counties with the highest number of buildings. Therefore, this transformation captures the majority of relevant infrastructures and keeps the resulting charts readable to the user rather than providing overwhelming information.

Interactivity introduces additional data preprocessing steps as the `countyDistributionBarChart` applies `.transform_filter(clickSelection)`. When the user clicks a bar in the usage chart, the selection defined by `clickSelection` is used to filter `topCountyBuildings` to only those records that `Usage Description` matches in the selected category. Once that filter is applied, the aggregation `count():Q` is recomputed so that the bar heights in the county chart reflect building counts for the selected usage type only rather than the entire dataset. At the same time, sorting by `-x` ensures that bars are ordered by frequency rather than alphabetically, which makes it much easier to see which usage types are most common and which counties hold the largest number of a particular building type. With `.add_params(clickSelection)` on the usage chart, it controls interactive system and creates a clear user flow where the user selections on the usage chart changes the results in the county chart.

#### Interactivity
The interactive is based on the point selection defined as `clickSelection = alt.selection_point(fields = ["Usage Description"])`, which turns the two charts into a combined visualization rather than separate figures. When users click any bar in the `usageTypeBarChart`, the category becomes the active selection. Visually, the selected bar changes from `light gray` to its assigned color from the `"category20"` palette and its `opacity` increases from `0.3` to `1.0` in order to become the highlighted part of the chart. Other categories remain in `light gray` at lower opacity so that the full distribution stays visible in the background. At the same time, the `countyDistributionBarChart` is changed based on the `transform_filter(clickSelection)` to show buildings with `Usage Description` that matches the chosen category across the `topCounties` subset.

This design helps the user to see how each type of facility is distributed across the state. For example, selecting "Laboratory" highlights where research intensive facilities cluster. Switching the selection to "Office" reveals a different pattern. Since the selection state stays after being selected, the user does not need to hold the cursor over the bar to maintain the filtered view, which makes it easier for the user to read labels, examine patterns, or look at the tooltips. As mentioned earlier, the tooltips provide exact counts when bar heights are visually similar to ensure more precise comparison. The chart is 300 pixels by 350 pixels so that both charts can be viewed side by side on standard displays while keeping labels readable. Additionally, the selection is bound to the full bar area to make the interaction feel responsive and intuitive during exploration.

## Data & Methods
The analysis uses the Illinois state building inventory dataset from `https://raw.githubusercontent.com/UIUC-iSchool-DataViz/is445_data/main/building_inventory.csv`. By using `pd.read_csv(datasetUrl)`, the data is loaded into `buildingDatasetRaw`. The dataset contains comprehensive building information as shown in `buildingDatasetRaw.columns`, such as Square Footage, Year Constructed, Year Acquired, Agency Name, Usage Description, County, City, Total Floors, Building Status, etc. 

Data quality assessment is examined through `buildingDatasetRaw.isna().sum()` to identify missing values. The `numericFeatures` and `categoricalFeatures` are identified using `select_dtypes()` to guide encoding selections. The `agencyCategories` dictionary combines 38 distinct agency names into 10 categories through `buildingDatasetRaw["Agency Category"] = buildingDatasetRaw["Agency Name"].map(agencyCategories)`. The data was cleaned through `buildingDatasetCleaned = buildingDatasetRaw[(buildingDatasetRaw["Year Constructed"] > 0) & (buildingDatasetRaw["Year Acquired"] > 0) & (buildingDatasetRaw["Square Footage"] > 0)]` to remove invalid records with zero or negative values. The geographic subset `topCountyBuildings` was created through value counting and filtering operations to balance comprehensiveness and visual clarity.

Altair configuration through `alt.data_transformers.enable("default", max_rows = None)` enables processing of the complete dataset. The visualizations are exported as Vega Lite JSON specifications by using `.save("../assets/json/buildingAgeAndSizeAnalysis.json")` and `.save('../assets/json/buildingUsageTypeAndLocationAnalysis.json')` for display.

<div class="left">
{% include elements/button.html link="https://raw.githubusercontent.com/UIUC-iSchool-DataViz/is445_data/main/building_inventory.csv" text="The Data" %}
</div>

<div class="right">
{% include elements/button.html link="https://github.com/Edward-H26/Edward-H26.github.io/blob/main/python_notebooks/Building_inventory_project.ipynb" text="The Analysis" %}
</div>