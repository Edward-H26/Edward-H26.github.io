---
name: Illinois State Buildings Analysis
tools: [Python, Altair, vega-lite, Pandas]
image: assets/pngs/buildings.png
description: Interactive analysis of Illinois state building inventory with temporal-size patterns and usage distribution across counties
custom_js:
  - vega.min
  - vega-lite.min
  - vega-embed.min
  - justcharts
---

# Illinois State Buildings Interactive Analysis

## The Comprehensive Analysis of Illinois State Buildings Based on the Year Constructed and Square Footage by Category Distribution

<vegachart schema-url="{{ site.baseurl }}/assets/json/buildingAgeAndSizeAnalysis.json" style="width:60%"></vegachart>

### Summary

#### Description
This visualization presents a comprehensive analysis of Illinois state buildings through `buildingAgeAndSizeAnalysis` that consists of`buildingYearAndAreaScatterPlot` and `agencyCategoryHistogramPlot`.  By plotting `Year Constructed` against `Square Footage` on a `log` scale, the scatter plot highlights patterns over time in terms of differences in building size. Each point represents an individual building from the `buildingDatasetCleaned` dataframe, which contains filtered records without any missing data in `Year Constructed`, `Year Acquired`, and `Square Footage` by applying `Year Constructed > 0`, `Year Acquired > 0`, and `Square Footage > 0` to the preprocessed dataframe. 

The visualization incorporates the customized `Agency Category` field that is created from the `agencyCategories` through unique mapping strategy, which combines 38 distinct agency names from `buildingDatasetRaw["Agency Name"].unique()` into 10 general categories. The histogram displays the count distribution across these agency categories, which dynamically updates based on the brush selection from the scatter plot. The visualization concatenates the two plots in order to create a side by side layout with widths of 300 pixels each in order to create a holistic view of the dataset. 

This visualization delineates the historical development of state buildings over more than two centuries. By connecting the `Year Constructed`, `Square Footage`, and Agency Category, users can uncover how the infrastructure of these state buildings have evolved 18th century to 21st century. By examining small rural houses and massive urban buildings,users can explore the resource allocation through different time period such as whether the state invest more in higher education or healthcare facilities during specific decades or when was the shift from industrial to service based buildings. The interactive brush selection transforms these abstract questions into visualizations where users can identify construction patterns during different economic periods, trace the expansion of specific state services building, and recognize how different administrative priorities have shaped the physical footprint of state government. The histogram further helps the user to visualize which agency categories dominated at the selected time period, which reveals whether the government was focusing on a specific sector of agency categories or various agency categories. As one can see, this design helps policymakers, researchers, and citizens to understand how past infrastructure decisions created the current the public facilities in Illinois and plan for future developments.

#### Encodings
By carefully choosing appropriate encodings for each category, the scatter plot `buildingYearAndAreaScatterPlot` utilizes these encodings to effectively represent the multidimensional building data. The x-axis utilizes `alt.X("Year Constructed:Q")` with the descriptive title "The Year of the Building Being Constructed" and a scale of `[1700, 2025]` to better display buildings at the early stage as well as most recent buildings. The y-axis utilizes `alt.Y("Square Footage:Q")` with the title "The Area of the Building in Square Footage" and a logarithmic scale through `scale = alt.Scale(type = "log")` in order to help users to better visualize different building sizes from small utility structures to massive institutional facilities. 

The `mark_circle()` function generates circular marks with `size = 40` to ensure visibility across the plot; it also has `opacity = 0.6` to indicate overlapping points. The tooltips include `Location Name:N`, `Agency Name:N`, `Agency Category:N`, `City:N`, `Year Constructed:Q`, `Square Footage:Q` formatted with comma separators, `Total Floors:Q`, `Usage Description:N`, and `Bldg Status:N` provide users with detailed contextual information during exploration.

The histogram `agencyCategoryHistogramPlot` employs `mark_bar()` with `alt.X("Agency Category:N")` on the x-axis with `axis = alt.Axis(labelAngle = -45)` to ensure category names remain readable despite of the differences in their lengths. The y-axis uses `alt.Y("count():Q")` with the title "The Number of Buildings" to display the frequency distribution across categories through the count aggregation. Both visualizations are 400x400 pixels with `anchor = "middle"` for title alignment.

#### Colormaps
The colormaps are based on `alt.Color("Agency Category:N")` with `scale = alt.Scale(scheme = "category10")` for both visualizations to establish visual coherence throughout the interactive experience. The `category10` palette was deliberately selected because it provides exactly 10 distinct colors that align perfectly with the 10 agency categories defined in the `agencyCategories` dictionary, including `Higher Education Institutions`, `Education Administration`, `Corrections & Justice`, `Public Safety & Emergency`, `Health & Human Services`, `Natural Resources & Environment`, `Infrastructure & Operations`, `Legal & Judicial`, and `Executive & Administrative`. This categorical scheme makes sure that each agency type receives equal visual prominence without implying any hierarchical relationships, which is crucial for analyzing of the how resources are being allocated to different agencies. The 0.6 opacity setting in the scatter plot allows these colors to blend naturally where overlapping points reveal specific patterns and maintain the ability to identify individual buildings. In the histogram, the legend is intentionally suppressed through `legend = None` to eliminate redundancy as the x-axis labels already provide category identification and the color serves primarily to maintain visual continuity with the scatter plot selections rather than convey additional information.

#### Transformations
Through systematic transformation of the `agencyCategories` . this mapping transforms 38 unique values from `buildingDatasetRaw["Agency Name"]` into 10 general categories that reflect the major organizations in state government, such as combining all state universities under "Higher Education" and grouping related law enforcement agencies under "Public Safety & Emergency". The transformation is applied through `buildingDatasetRaw["Agency Category"] = buildingDatasetRaw["Agency Name"].map(agencyCategories)` to construct a new category for pattern recognition across related agencies. 

The data was cleaned through `buildingDatasetCleaned = buildingDatasetRaw[(buildingDatasetRaw["Year Constructed"] > 0) & (buildingDatasetRaw["Year Acquired"] > 0) & (buildingDatasetRaw["Square Footage"] > 0)]` to remove invalid records with zero or negative values that represent data entry errors or missing information. The logarithmic transformation applied to the `Square Footage` axis through `scale = alt.Scale(type = "log")` to reveal hidden patterns across multiple dimensions of the data of magnitude, which makes it possible to simultaneously visualize small administrative offices and massive institutional buildings on the same plot. The brush selection mechanism creates a dynamic transformation through `transform_filter(brushSelection)` that filters the histogram data in real time based on the user's selection area and the count aggregation continuously recalculates category frequencies to reflect only the selected subset of buildings.

#### Interactivity
The interval brush selection through `brushSelection = alt.selection_interval(encodings = ["x", "y"])` transforms the visualization from a static display into a powerful analytical tool that responds to user's selection in real time. By enabling click and drag selection across both x-axis and y-axis, users can investigate about state buildings in a specific time period, such as examining what types of agencies constructed large facilities during particular historical periods. The selection is integrated into the scatter plot via `.add_params(brushSelection)` and connected to the histogram through `.transform_filter(brushSelection)` so that user's selection can be updated in real time to reflect the selected subset of buildings.

The comprehensive tooltip also provides detailed information to demonstrate the exact locations, managing agencies, construction dates, and current status whenever users hover over individual points. The formatted Square Footage values utilizes `format = ","` to ensure that large numbers remain readable and enhance the user experience during their exploration. The 0.6 opacity setting ensures that brush selections remain visible even in densely populated regions of the plot and the logarithmic scale maintains consistent  across the entire range of building sizes from the smallest to the largest facilities in the state inventory.

## The Comprehensive Analysis of Illinois State Buildings Based on the Building Usage Types and Location by County Distribution

<vegachart schema-url="{{ site.baseurl }}/assets/json/buildingUsageTypeAndLocationAnalysis.json" style="width:70%"></vegachart>

### Summary

#### Description
This visualization combines `usageTypeBarChart` and `countyDistributionBarChart` into `buildingUsageTypeAndLocationAnalysis` to analyze the usage patterns and geographic distribution of Illinois state buildings. The `usageTypeBarChart` displays all unique values from `buildingDatasetCleaned["Usage Description"]` as x-axis sorted by frequency to reveal the variety of purposes these state facilities serve across Illinois. The right chart presents the geographic distribution across the state's most significant counties through `buildingDatasetCleaned["County"].value_counts().head(20).index.tolist()` which identifies the top 20 counties by building count and stores them in the `topCounties` list. This subset creates `topCountyBuildings = buildingDatasetCleaned[buildingDatasetCleaned["County"].isin(topCounties)]` to maintain interpretability while capturing the majority of state building infrastructure. The visualization utilizes `clickSelection = alt.selection_point(fields = ["Usage Description"])` to establish an interactive connection between building purposes and geographic patterns to explore whether certain facility types cluster in specific regions or distribute evenly across the state. Through the pipe operator (`|`) layout with widths of 300 and 350 pixels, the combined visualization provides complementary perspectives on the state's building infrastructure.

This visualization delineates how Illinois strategically positions governmental functions across its diverse geography from the densely populated Chicago metropolitan area to rural agricultural regions. By connecting functional purpose with geographic location, users can uncover patterns that reveal state policy decisions, historical development trajectories, and service delivery realities across Illinois' varied landscape. The interactive design enables users to investigate spatial equity and functional specialization: whether essential government services are accessible across the state or concentrate in urban centers, whether research facilities cluster around university towns while correctional facilities appear in remote locations. The visualization reveals the logic behind state infrastructure placement and how geography, population density, institutional presence, and historical circumstances shape where different building types exist. For policymakers and researchers, this tool reveals potential service gaps where certain building types concentrate heavily in specific counties while residents of other regions face access challenges. For urban planners and economic development professionals, the geographic clustering patterns indicate how state facilities influence local economies and community character. Citizens can discover whether their county receives proportionate state infrastructure investment compared to similarly sized regions. The frequency ranking immediately highlights dominant usage types and building-rich counties while the interactive filtering enables investigation into specific facilities and transforms administrative data into insights about how state government physically manifests across Illinois' landscape and how effectively infrastructure distribution serves the state's geographically dispersed population.

#### Encodings
By carefully choosing appropriate encodings for each dimension, the `usageTypeBarChart` utilizes a horizontal bar design with `alt.X("count():Q", title = "Number of Buildings")` representing the quantitative frequency of each usage type and `alt.Y("Usage Description:N", title = "Usage Type", sort = "-x")` displaying the categorical usage descriptions in descending order of frequency to ensure the most common building types appear at the top. The conditional color encoding `alt.condition(clickSelection, alt.Color("Usage Description:N", scale = alt.Scale(scheme = "category20"), legend = None), alt.value("lightgray"))` creates a dynamic visual response where selected usage types display in distinctive colors from the category20 palette while unselected types display in neutral gray. This visual hierarchy utilizes the opacity encoding `alt.condition(clickSelection, alt.value(1.0), alt.value(0.3))` which applies full opacity to selected items and reduces unselected items to 30% opacity to guide user attention.

The `countyDistributionBarChart` employs a similar horizontal structure with `alt.X("count():Q", title = "Number of Buildings")` for the building count and `alt.Y("County:N", title = "County (Top 20)", sort = "-x")` for county names to maintain the descending frequency arrangement. The static color `alt.value("steelblue")` provides visual stability while avoiding color competition with the usage type selections. Both charts incorporate formatted tooltips through `alt.Tooltip("count():Q", title = "Number of Buildings", format = ",")` to ensure precise counts display with thousand separators for improved readability.

#### Colormaps
The colormaps are based on a dual-strategy color system. The `usageTypeBarChart` utilizes the `category20` color scheme which provides 20 distinct colors to accommodate the diverse array of usage types from `buildingDatasetCleaned["Usage Description"].unique()` including offices, laboratories, storage facilities, warehouses, classrooms, dormitories, and specialized facilities unique to state operations. This extended palette ensures that each usage type receives a visually distinct color when selected to facilitate clear identification and comparison across selections. The unselected state employs `lightgray` (#D3D3D3), which maintains visibility while clearly indicating inactive status and creates an effective visual hierarchy without overwhelming users when exploring individual usage types.

The `countyDistributionBarChart` adopts a monochromatic approach using `steelblue` (#4682B4) to reflect the fundamental difference between categorical usage types and geographic counties. This single-color strategy prevents visual confusion between the two chart types and emphasizes that counties represent spatial rather than categorical distinctions. The steelblue provides professional aesthetics with sufficient contrast against the white background to ensure readability. By maintaining constant color regardless of selection state and relying on data filtering rather than color changes, the visualization creates a clear mental model where multicolor represents functional categories and monochrome represents geographic distribution to help users maintain orientation during analytical exploration.

#### Transformations
Through strategic transformation to balance comprehensive coverage with visual clarity, the geographic data creates the `topCounties` subset. The operation `buildingDatasetCleaned["County"].value_counts().head(20).index.tolist()` performs a multi-step transformation by counting the frequency of buildings in each county, sorting these counts in descending order, selecting the top 20 counties, and extracting the county names as a Python list. This list filters the full dataset through `topCountyBuildings = buildingDatasetCleaned[buildingDatasetCleaned["County"].isin(topCounties)]` to reduce Illinois' 102 counties to the 20 most significant by building count which captures the majority of state building infrastructure while maintaining chart readability.

The click selection mechanism creates dynamic data transformation through `.transform_filter(clickSelection)` applied to the county distribution chart. When users click a usage type bar, this transformation filters the `topCountyBuildings` dataset to include only buildings matching the selected `Usage Description` value and triggers recalculations where the count aggregation `count():Q` recomputes building frequencies for each county based solely on the selected usage type. The consistent `-x` sort transformation ensures that bars display in frequency order rather than alphabetical order to facilitate pattern recognition and make it easy to identify both the most common usage types and the counties with the highest concentrations of specific building types. The `.add_params(clickSelection)` transformation on the usage chart establishes it as the control element for the interactive system and creates a unidirectional data flow where user interactions trigger filtered transformations that propagate to the geographic display.

#### Interactivity
The point selection mechanism through `clickSelection = alt.selection_point(fields = ["Usage Description"])` transforms static charts into a dynamic analytical system. When users click any bar in the `usageTypeBarChart`, the interaction triggers a coordinated visual response where the selected usage type transitions from subdued light gray to its assigned vibrant color from the category20 palette, its opacity increases from 30% to 100% to create a clear focal point, all other usage types simultaneously dim to maintain context while yielding visual prominence, and the `countyDistributionBarChart` instantly updates through `transform_filter(clickSelection)` to display only buildings of the selected type across the top 20 counties.

This interactive design enables sophisticated comparative analysis workflows. Users can systematically click through different usage types to compare their geographic patterns where selecting "Laboratory" immediately reveals concentration in counties hosting major research universities like Champaign County (UIUC) and Jackson County (SIU) while selecting "Office" shows different patterns with concentrations in Sangamon County (Springfield's state government complex) and Cook County (Chicago's administrative centers). The persistent selection state allows users to study filtered distributions without maintaining mouse position while the tooltip functionality provides precise numerical counts when visual bar lengths are too similar for comparison. The widths of 300 and 350 pixels optimize the side-by-side layout for standard displays while ensuring all labels remain readable and the selection binding to the entire bar area improves usability by providing a larger click target.

## Data & Methods

The analysis uses the Illinois state building inventory dataset from `https://raw.githubusercontent.com/UIUC-iSchool-DataViz/is445_data/main/building_inventory.csv`, loaded through `pd.read_csv(datasetUrl)` into `buildingDatasetRaw`. The dataset contains comprehensive building attributes identified through `buildingDatasetRaw.columns` including Square Footage, Year Constructed, Year Acquired, Agency Name, Usage Description, County, City, Total Floors, and Building Status. 

Data quality assessment through `buildingDatasetRaw.isna().sum()` identified missing values that informed the cleaning strategy. The `numericFeatures` and `categoricalFeatures` were identified using `select_dtypes()` to guide encoding channel selections. The `agencyCategories` dictionary consolidates 38 distinct agency names into 10 categories, applied through `buildingDatasetRaw["Agency Category"] = buildingDatasetRaw["Agency Name"].map(agencyCategories)` to create a new analytical dimension. The data was cleaned through `buildingDatasetCleaned = buildingDatasetRaw[(buildingDatasetRaw["Year Constructed"] > 0) & (buildingDatasetRaw["Year Acquired"] > 0) & (buildingDatasetRaw["Square Footage"] > 0)]` to remove invalid records with zero or negative values. The geographic subset `topCountyBuildings` was created through value counting and filtering operations to balance comprehensive coverage with visual clarity.

Altair configuration through `alt.data_transformers.enable("default", max_rows = None)` enables processing of the complete dataset. The visualizations are exported as Vega-Lite JSON specifications using `.save("../assets/json/buildingAgeAndSizeAnalysis.json")` and `.save('../assets/json/buildingUsageTypeAndLocationAnalysis.json')` for web deployment through the Vega-Embed library.

<div class="left">
{% include elements/button.html link="https://raw.githubusercontent.com/UIUC-iSchool-DataViz/is445_data/main/building_inventory.csv" text="The Data" %}
</div>

<div class="right">
{% include elements/button.html link="https://github.com/Edward-H26/Edward-H26.github.io/blob/main/python_notebooks/Building_inventory_project.ipynb" text="The Analysis" %}
</div>